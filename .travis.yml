sudo: false

notifications:
  email: false

# Only build pushes from the website branch. PRs are always built.
branches:
  only:
    - master

env:
  global:
    # Github Token (GH_TOKEN)
    secure: "f9eHI2S5zUUIvEITvUa73Zh8HNbDxwFtS4TAF5U5lBPfPAwfWAQtkMlF5q1R9+6tO8XfE3fi2UzzVo2NDkj1qOE41nj1HhIc8OtjxcWI6eD/2MuRzpeGWOAvQ9SvcOLw5V+xUmrPIUNOOsukNC7fAxdnMBalslVysGqbpts0wN3U+wsycE/Y5VDYLQnvn6zOaC/Q+GQyD30SoP6m0Zz8G62YuBLlVxvBwsN/2UxDp4qAWFKbaXy9LWejZ0x3oby4+VT8SsbbFQH8fQEbjBd6D7mulUPazKrXKfc6hS22z2UYCRunpfAclI11GN2c+qGLqvSpdZJFc2wZ596UxMIDZQ4A2Gg80M6dHzDtQbOBDS9MHVLXjxDzEBPX7UiRxZmiA5V+FUYtxvAMEuTNq01yFy/20GQIJlEoudBKDwLeOfVzd0UPb8XnRSWvoHQqpCm5g0swytZ074Rlz3ctFH+SLZ07NJEQWSBe2XWGXe+8LBqMBkqOGYhCWfuQ735vmH/LCsUVfoYUf56MV/OVUkysELUBoXoSjD40XGP1hosIP/qyZUjvA3yE6YGCuHhmXIHIcpujhBesMAoPrikcQTZ/wW4bzE9iz9iyZTbmgZCAq1tkyXrv3brEdfgMFZfSGZCpQDCykKCh/XVAFGAarHU2CUpIRC5A/+bGLeko2STvkTQ="

before_install:
  # Get Miniconda from Continuum
  # Need to source the script to set the PATH variable in this environment
  # (not the scripts environment)
  - source ci/install-miniconda.sh

install:
  # Update conda itself
  - conda update --yes conda
  # Create a conda env based on environment.yml
  - conda env create
  - source activate urubu

script:
  - make

deploy:
  # Push the built HMTL to Github pages
  - provider: script
    script: bash ci/deploy-gh-pages.sh
    skip_cleanup: true
    on:
      branch: master

