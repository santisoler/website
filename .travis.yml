sudo: false

notifications:
  email: false

# Only build pushes from the website branch. PRs are always built.
branches:
  only:
    - master

env:
  global:
    # Github Token (GH_TOKEN)
    secure: "ZSNYSt7wMI6GA9jAKLs3ofm7DXV7iM12JuRaBZUzdrmY4MXIRH3qXiiY5gsRTn9JQEbekQ0oP9bU3TI0v98PGQecJ/itbxJWU5XhnR6xD58cxV5keQ7cfWOt08Pb9eITSfJXH7oXZ4wUzLve9bKN9+j1xALLqnG4aJhtz88HWeb6bjbBXKro9ooPCzBYofV+3LuiLsl3TVo45LNfh67rzVAPXfC9mmdOmXFwGQbzFP+CdppkGtUCJRwjH8Ldf/UloPOCBIWJvTjL/vQyjQJKVKpvRnUq3lOxjLSNxeeBv07edITpZDEikms+hBoEhJK43PjH1akNQxE9nWHWTh/f+FSEQRssOprbtGgrSw0eohCOcZikNb1Qc+UEl/liL5xswTqmWFNe2/gPFv5rStuUVuqQ7/1kqVGZZK0x0q5FUErm+5gE3sy5PgApCJiDHL7tVd8TW1Mv0wd5TKMXmAFymGVOjej0FNtQVnze8PGfAXiqPFq9A/g2hHE9puUqwlwHay4JKau0jPSA2qkiTeZ7dUnRyI8US3D/V9RNrT3SdsofSLs84PYQHFDeLyZG7M2OGLy2g/R5dYW9QMUpl115a3l6AIcBMDnWitAnlulsddYxi51tNz4ch49AGEj93T2B1ti2uLjcVX7Ebz+tDSTSh/R9+6o30V8dJ7K0QkwHX6k="

before_install:
  # Get Miniconda from Continuum
  # Need to source the script to set the PATH variable in this environment
  # (not the scripts environment)
  - source ci/install-miniconda.sh

install:
  # Update conda itself
  - conda update --yes conda
  # Create a conda env based on environment.yml
  - conda env create
  - source activate urubu

script:
  - make

deploy:
  # Push the built HMTL to Github pages
  - provider: script
    script: bash ci/deploy-gh-pages.sh
    skip_cleanup: true
    on:
      branch: master

