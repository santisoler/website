sudo: false

notifications:
  email: false

# Only build pushes from the website branch. PRs are always built.
branches:
  only:
    - master

env:
  global:
    # Github Token (GH_TOKEN)
    secure: "B0r9km3wihiI2ZoHWk22cN0rRHARf46RgpMKOuvHi6cNako3JO5JdfNNJ5q17pH07VyYVJepKI0qPUkNxtQI/nSpDHJOVoXbJZmuIckyJOKpc1GNT0dQOJ809biQbBIgZqHYznS0fUNTYeqors1kUzXmRNFy/bQi6kKoU3BLSwTmIBpt0n4dRNW/8ocW41iN4pgkd0xXXsOGc9t030jjzxzqS2M4s9LZhSbSLafGe4aRLyTzH9XyZ7fZhkiIWwuTO653cumJ5ICQl90eYhCLhVJRP13qyxX+82fHpOqH7drAQWCHWbMcrelDNPPF5nL1HwvemQd0GiLYe1FGbvP590No7SNNHSfStvWLauHoLyBjVoP1cwc9kzr+b5xgW5jDYUX6HNW+3GVTeBRQqOZf6Nbhz4lTty3sn4TyW0LtDdcNDfB3SwhHG5l2ypw5MKwRhrxjy4p6fg/GK74nxxZdSJ2MG38smeRJnmsqwLRXyr6cIEWRHNhIaV7NoZSh2a28WYTmU2ybazi/IgbDUDAsXpTNxLo8yEFMWw9LkSFN8iNg4lNYU80xATJUxGr/IfCSIv56SLBhsniDmQdseluXPXtD7pcmH2x7YqN4FfVIYaleTyFb8MzowL8brpxyLaV2Si/kqvr9MsiwNlK82JgVF4yjXkNWe66ZbI+oBkrAwSo="

before_install:
  # Get Miniconda from Continuum
  # Need to source the script to set the PATH variable in this environment
  # (not the scripts environment)
  - source ci/install-miniconda.sh

install:
  # Update conda itself
  - conda update --yes conda
  # Create a conda env based on environment.yml
  - conda env create
  - source activate urubu

script:
  - make

deploy:
  # Push the built HMTL to Github pages
  - provider: script
    script: bash ci/deploy-gh-pages.sh
    skip_cleanup: true
    on:
      branch: master

